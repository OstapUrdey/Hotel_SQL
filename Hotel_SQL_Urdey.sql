CREATE TABLE Працівники (
Код_працівника INT NOT NULL,
Прізвище VARCHAR(25) NOT NULL,
Імя VARCHAR(25) NOT NULL,
По_батькові VARCHAR(25) NOT NULL,
Дата_народження DATETIME NOT NULL,
Посада VARCHAR(25) NOT NULL,
Код_посади INT NOT NULL,
Заробітна_плата MONEY NOT NULL,
CONSTRAINT Працівники_первинний_ключ PRIMARY KEY  (Код_працівника),
CONSTRAINT Посада_Працівники FOREIGN KEY (Код_посади)
REFERENCES Посада (Код_посади)
ON UPDATE CASCADE 
ON DELETE CASCADE
)
GO

CREATE TABLE Посада(
Код_посади INT NOT NULL,
Посада VARCHAR(50) NOT NULL,
CONSTRAINT Посада_первинний_ключ PRIMARY KEY  (Код_посади)
ON UPDATE CASCADE 
ON DELETE CASCADE
)
GO

CREATE TABLE Номера (
Код_номера INT NOT NULL,
Категорія VARCHAR(25) NOT NULL,
Код_категорії INT NOT NULL,
CONSTRAINT Номера_первинний_ключ PRIMARY KEY (Код_номера),
CONSTRAINT Категорія_номерів_Номера FOREIGN KEY (Код_категорії)
REFERENCES Категорія_номерів (Код_категорії)
ON UPDATE CASCADE 
ON DELETE CASCADE
)
GO

CREATE TABLE Категорія_номерів (
Код_категорії INT NOT NULL,
Категорія VARCHAR(25) NOT NULL,
Кількість_місць INT NOT NULL,
Кількість_кімнат INT NOT NULL,
Вартість_за_добу MONEY NOT NULL,
CONSTRAINT Категорія_номерів_первинний_ключ PRIMARY KEY (Код_категорії)
ON UPDATE CASCADE 
ON DELETE CASCADE
)
GO

CREATE TABLE Клієнти (
Код_клієнта INT NOT NULL,
Прізвище VARCHAR(25) NOT NULL,
Імя VARCHAR(25) NOT NULL,
По_батькові VARCHAR(25) NOT NULL,
Дата_народження DATETIME NOT NULL,
Стать VARCHAR(25) NOT NULL,
CONSTRAINT Клієнти_первинний_ключ PRIMARY KEY (Код_клієнта)
)
GO

CREATE TABLE Бронювання (
Код_бронювання INT NOT NULL,
Код_стану INT NOT NULL,
Код_номера INT NOT NULL,
Прізвище VARCHAR(25) NOT NULL,
Код_клієнта INT NOT NULL,
CONSTRAINT Бронювання_первинний_ключ PRIMARY KEY  (Код_бронювання),
CONSTRAINT Клієнти_Бронювання FOREIGN KEY (Код_клієнта)
REFERENCES Клієнти (Код_клієнта),
CONSTRAINT Стан_номеру_Бронювання FOREIGN KEY (Код_номера)
REFERENCES Стан_номеру (Код_номера)
ON UPDATE CASCADE 
ON DELETE CASCADE
)
GO

CREATE TABLE Стан_номеру (
Код_номера INT NOT NULL,
Код_працівника INT NOT NULL,
Код_клієнта INT NOT NULL,
Бронювання DATETIME NOT NULL,
Заїзд DATETIME NOT NULL,
Відїзд DATETIME NOT NULL,
Сума MONEY NOT NULL,
CONSTRAINT Стан_номеру_первинний_ключ PRIMARY KEY (Код_номера),
CONSTRAINT Стан_номеру_Номера FOREIGN KEY (Код_номера)
REFERENCES Номера (Код_номера),
CONSTRAINT Працівники_Стан_номеру FOREIGN KEY (Код_працівника)
REFERENCES Працівники (Код_працівника),
CONSTRAINT Стан_номера_Клієнти FOREIGN KEY (Код_клієнта)
REFERENCES Клієнти (Код_клієнта)
ON UPDATE CASCADE 
ON DELETE CASCADE
)
GO

INSERT INTO Працівники (Код_працівника, Прізвище, Імя, По_батькові, Дата_народження, Посада, Код_посади, Заробітна_плата) VALUES ('101', 'Урдей', 'Андрій', 'Остапович', '01.09.1972', 'Директор', '201', '9000')
INSERT INTO Працівники (Код_працівника, Прізвище, Імя, По_батькові, Дата_народження, Посада, Код_посади, Заробітна_плата) VALUES ('102', 'Урдей', 'Тетяна', 'Іванівна', '23.12.1975', 'Шеф-повар', '202', '8000')
INSERT INTO Працівники (Код_працівника, Прізвище, Імя, По_батькові, Дата_народження, Посада, Код_посади, Заробітна_плата) VALUES ('103', 'Урдей', 'Остап', 'Андрійович', '03.09.1998', 'Адміністратор', '203', '7000')
INSERT INTO Працівники (Код_працівника, Прізвище, Імя, По_батькові, Дата_народження, Посада, Код_посади, Заробітна_плата) VALUES ('104', 'Шевченко', 'Соломія', 'Ігорівна', '22.05.1965', 'Покоївка', '204', '6000')
INSERT INTO Працівники (Код_працівника, Прізвище, Імя, По_батькові, Дата_народження, Посада, Код_посади, Заробітна_плата) VALUES ('105', 'Ферелетич', 'Іван', 'Олегович', '23.07.1990', 'Тех-працівник', '205', '5000')

INSERT INTO Посада (Код_посади, Посада) VALUES ('201', 'Директор')
INSERT INTO Посада (Код_посади, Посада) VALUES ('202', 'Шеф-повар')
INSERT INTO Посада (Код_посади, Посада) VALUES ('203', 'Адміністратор')
INSERT INTO Посада (Код_посади, Посада) VALUES ('204', 'Покоївка')
INSERT INTO Посада (Код_посади, Посада) VALUES ('205', 'Тех-працівник')

INSERT INTO Категорія_номерів (Код_категорії, Категорія, Кількість_місць, Кількість_кімнат, Вартість_за_добу) VALUES ('401', '2М', '10', '5', '600')
INSERT INTO Категорія_номерів (Код_категорії, Категорія, Кількість_місць, Кількість_кімнат, Вартість_за_добу) VALUES ('402', '3М', '3', '1', '700')
INSERT INTO Категорія_номерів (Код_категорії, Категорія, Кількість_місць, Кількість_кімнат, Вартість_за_добу) VALUES ('403', '4М', '4', '1', '800')

INSERT INTO Номера (Код_номера, Категорія, Код_категорії) VALUES ('301', '2М', '401')
INSERT INTO Номера (Код_номера, Категорія, Код_категорії) VALUES ('302', '2М', '401')
INSERT INTO Номера (Код_номера, Категорія, Код_категорії) VALUES ('303', '2М', '401')
INSERT INTO Номера (Код_номера, Категорія, Код_категорії) VALUES ('304', '2М', '401')
INSERT INTO Номера (Код_номера, Категорія, Код_категорії) VALUES ('305', '2М', '401')
INSERT INTO Номера (Код_номера, Категорія, Код_категорії) VALUES ('306', '3М', '402')
INSERT INTO Номера (Код_номера, Категорія, Код_категорії) VALUES ('307', '4М', '403')

INSERT INTO Клієнти (Код_клієнта, Прізвище, Імя, По_батькові, Дата_народження, Стать) VALUES ('401', 'Марків', 'Володимир', 'Богданович', '25.12.1979', 'Чол')
INSERT INTO Клієнти (Код_клієнта, Прізвище, Імя, По_батькові, Дата_народження, Стать) VALUES ('402', 'Матула', 'Петро', 'Євстахович', '29.12.1979', 'Чол')
INSERT INTO Клієнти (Код_клієнта, Прізвище, Імя, По_батькові, Дата_народження, Стать) VALUES ('403', 'Чорна', 'Світлана', 'Павлівна', '12.08.1969', 'Жін')
INSERT INTO Клієнти (Код_клієнта, Прізвище, Імя, По_батькові, Дата_народження, Стать) VALUES ('404', 'Пелех', 'Марія', 'Зіновіївна', '12.12.1970', 'Жін')
INSERT INTO Клієнти (Код_клієнта, Прізвище, Імя, По_батькові, Дата_народження, Стать) VALUES ('405', 'Лотоцька', 'Валентина', 'Михайлівна', '03.04.1998', 'Жін')

INSERT INTO Бронювання (Код_бронювання, Код_стану, Код_номера, Прізвище, Код_клієнта) VALUES ('501', '601', '301', 'Марків', '401')
INSERT INTO Бронювання (Код_бронювання, Код_стану, Код_номера, Прізвище, Код_клієнта) VALUES ('502', '602', '302', 'Матула', '402')
INSERT INTO Бронювання (Код_бронювання, Код_стану, Код_номера, Прізвище, Код_клієнта) VALUES ('503', '603', '303', 'Чорна', '403')
INSERT INTO Бронювання (Код_бронювання, Код_стану, Код_номера, Прізвище, Код_клієнта) VALUES ('504', '604', '304', 'Пелех', '403')
INSERT INTO Бронювання (Код_бронювання, Код_стану, Код_номера, Прізвище, Код_клієнта) VALUES ('505', '605', '307', 'Лотоцька', '404')

INSERT INTO Стан_номеру (Код_номера, Код_працівника, Код_клієнта, Бронювання, Заїзд, Відїзд, Сума) VALUES ('301', '103', '401', '28.01.2019', '01.01.2019', '10.02.2019', '5400')
INSERT INTO Стан_номеру (Код_номера, Код_працівника, Код_клієнта, Бронювання, Заїзд, Відїзд, Сума) VALUES ('302', '103', '402', '28.01.2019', '01.01.2019', '10.02.2019', '5400')
INSERT INTO Стан_номеру (Код_номера, Код_працівника, Код_клієнта, Бронювання, Заїзд, Відїзд, Сума) VALUES ('303', '103', '403', '29.01.2019', '02.01.2019', '05.02.2019', '1800')
INSERT INTO Стан_номеру (Код_номера, Код_працівника, Код_клієнта, Бронювання, Заїзд, Відїзд, Сума) VALUES ('304', '103', '404', '29.01.2019', '02.01.2019', '05.02.2019', '1800')
INSERT INTO Стан_номеру (Код_номера, Код_працівника, Код_клієнта, Бронювання, Заїзд, Відїзд, Сума) VALUES ('307', '103', '405', '31.01.2019', '01.01.2019', '03.02.2019', '1600')

SELECT * FROM Працівники WHERE Заробітна_плата > 6000 ORDER BY Заробітна_плата

SELECT * FROM Працівники WHERE Прізвище LIKE 'У_д_й'

SELECT * FROM Стан_номеру WHERE Відїзд = '10.02.2019'

SELECT * FROM Категорія_номерів WHERE Код_категорії IN (401, 402)

SELECT AVG(Заробітна_плата)
FROM Працівники
